BEGIN TRANSACTION;

BEGIN TRY
    -- Добавление клиента
    INSERT INTO КЛИЕНТЫ (id_клиента, Наименование_фирмы_заказчика, Адрес, Телефон, Контактное_лицо)
    VALUES (1, 'ООО Альфа', 'г. Москва, ул. Ленина, д. 1', 1234567890, 'Иванов Иван Иванович');

    -- Добавление товара
    INSERT INTO ТОВАРЫ (id_товара, Наименование_товара, Цена, Описание_товара)
    VALUES (1, 'Ноутбук', 50000, 'Ноутбук для работы и учебы');

    -- Создание заказа
    INSERT INTO ЗАКАЗЫ (id_заказа, id_клиента, id_товара, Количество, Дата_поставки, Вид_доставки)
    VALUES (1, 1, 1, 2, '2024-12-31', 'Курьерская доставка');

    -- Фиксация транзакции
    COMMIT TRANSACTION;

    PRINT 'Заказ успешно оформлен!';
END TRY
BEGIN CATCH
    -- Откат транзакции в случае ошибки
    ROLLBACK TRANSACTION;

    PRINT 'Ошибка при оформлении заказа. Изменения отменены.';
END CATCH;




BEGIN TRANSACTION;

BEGIN TRY
    -- Обновление данных клиента
    UPDATE КЛИЕНТЫ
    SET Адрес = 'г. Санкт-Петербург, ул. Невский, д. 100',
        Телефон = 9876543210
    WHERE id_клиента = 1;

    -- Обновление вида доставки для всех заказов клиента
    UPDATE ЗАКАЗЫ
    SET Вид_доставки = 'Самовывоз'
    WHERE id_клиента = 1;

    -- Фиксация транзакции
    COMMIT TRANSACTION;

    PRINT 'Данные клиента успешно обновлены!';
END TRY
BEGIN CATCH
    -- Откат транзакции в случае ошибки
    ROLLBACK TRANSACTION;

    PRINT 'Ошибка при обновлении данных клиента. Изменения отменены.';
END CATCH;


BEGIN TRANSACTION;

BEGIN TRY
    -- Удаление всех заказов клиента
    DELETE FROM ЗАКАЗЫ
    WHERE id_клиента = 1;

    -- Удаление клиента
    DELETE FROM КЛИЕНТЫ
    WHERE id_клиента = 1;

    -- Фиксация транзакции
    COMMIT TRANSACTION;

    PRINT 'Клиент и его заказы успешно удалены!';
END TRY
BEGIN CATCH
    -- Откат транзакции в случае ошибки
    ROLLBACK TRANSACTION;

    PRINT 'Ошибка при удалении клиента. Изменения отменены.';
END CATCH;




BEGIN TRANSACTION;

BEGIN TRY
    -- Увеличение цен на все товары на 10%
    UPDATE ТОВАРЫ
    SET Цена = Цена * 1.1;

    -- Фиксация транзакции
    COMMIT TRANSACTION;

    PRINT 'Цены на товары успешно обновлены!';
END TRY
BEGIN CATCH
    -- Откат транзакции в случае ошибки
    ROLLBACK TRANSACTION;

    PRINT 'Ошибка при обновлении цен. Изменения отменены.';
END CATCH;
