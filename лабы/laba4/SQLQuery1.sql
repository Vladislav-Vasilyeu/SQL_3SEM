use UNIVER

------------Создание и заполнение таблицы AUDITORIUM_TYPE 

create table AUDITORIUM_TYPE 
(    AUDITORIUM_TYPE  char(10) constraint AUDITORIUM_TYPE_PK  primary key not null,  
      AUDITORIUM_TYPENAME  varchar(30)       null
 )
insert into AUDITORIUM_TYPE   (AUDITORIUM_TYPE,  AUDITORIUM_TYPENAME )        
	values ('ЛК',            'Лекционная'),
			('ЛБ-К',          'Компьютерный класс'),
			('ЛК-К',          'Лекционная с уст. проектором'),
			('ЛБ-X',          'Химическая лаборатория'),
			('ЛБ-СК',   'Спец. компьютерный класс');
                      
-------------Создание и заполнение таблицы AUDITORIUM  
  create table AUDITORIUM 
(   AUDITORIUM   char(20)  constraint AUDITORIUM_PK  primary key not null,              
    AUDITORIUM_TYPE     char(10) constraint  AUDITORIUM_AUDITORIUM_TYPE_FK foreign key references AUDITORIUM_TYPE(AUDITORIUM_TYPE) not null, 
   AUDITORIUM_CAPACITY  integer constraint  AUDITORIUM_CAPACITY_CHECK default 1  check (AUDITORIUM_CAPACITY between 1 and 300),  -- вместимость 
   AUDITORIUM_NAME      varchar(50)  null                                   
)
insert into  AUDITORIUM   (AUDITORIUM, AUDITORIUM_NAME, AUDITORIUM_TYPE, AUDITORIUM_CAPACITY)   
values  ('301-1', '301-1','ЛБ-К', 15),
		('304-4',   '304-4', 'ЛБ-К', 90),
		('313-1',   '313-1', 'ЛК-К',   60), 
		('314-4',   '314-4', 'ЛК',   90),
		('320-4',   '320-4', 'ЛК',   90), 
		('324-1',   '324-1', 'ЛК-К', 50),
		('413-1',   '413-1', 'ЛБ-К', 15),
		('423-1',   '423-1', 'ЛБ-К',  90);

  ------Создание и заполнение таблицы FACULTY
  create table FACULTY
  (    FACULTY      char(10)   constraint  FACULTY_PK primary key not null,
       FACULTY_NAME  varchar(50) default '???'
  );
insert into FACULTY   (FACULTY,   FACULTY_NAME )
	values  ('ХТиТ',   'Химическая технология и техника'),
			('ИЭФ',     'Инженерно-экономический факультет'),
			('ТТЛП',    'Технология и техника лесной промышленности'),
			('ТОВ',     'Технология органических веществ'),
			('ИТ',     'Факультет информационных технологий'),  
			('ЛХ',   'Лесохозяйственный'),
			('ИДиП',   'Издательское дело и полиграфия');
------Создание и заполнение таблицы PROFESSION
   create table PROFESSION
  (   PROFESSION   char(20) constraint PROFESSION_PK  primary key not null,
       FACULTY    char(10) constraint PROFESSION_FACULTY_FK foreign key references FACULTY(FACULTY) not null,
       PROFESSION_NAME varchar(100) null,    
	   QUALIFICATION   varchar(50)  null 
  );  
 insert into PROFESSION(FACULTY, PROFESSION, PROFESSION_NAME, QUALIFICATION)    
 values    ('ИТ',  '1-40 01 02',   'Информационные системы и технологии', 'инженер-программист-системотехник' ),
			('ИДиП',  '1-47 01 01', 'Издательское дело', 'редактор-технолог' ),
			('ИДиП',  '1-36 06 01',  'Полиграфическое оборудование и системы обработки информации', 'инженер-электромеханик' ),                    
			('ХТиТ',  '1-36 07 01',  'Машины и аппараты химических производств и предприятий строительных материалов', 'инженер-механик' ),
			('ЛХ',  '1-75 01 01',      'Лесное хозяйство', 'инженер лесного хозяйства' ),
			('ЛХ',  '1-75 02 01',   'Садово-парковое строительство', 'инженер садово-паркового строительства' ),
			('ЛХ',  '1-89 02 02',     'Туризм и природопользование', 'специалист в сфере туризма' ),
			('ТТЛП',  '1-46 01 01',      'Лесоинженерное дело', 'инженер-технолог' ),
			('ТОВ',  '1-48 01 02',  'Химическая технология органических веществ, материалов и изделий', 'инженер-химик-технолог' ),                
			('ТОВ',  '1-48 01 05',    'Химическая технология переработки древесины', 'инженер-химик-технолог' ), 
			('ТОВ',  '1-54 01 03',   'Физико-химические методы и приборы контроля качества продукции', 'инженер по сертификации' ); 

------Создание и заполнение таблицы PULPIT
  create table  PULPIT 
(   PULPIT   char(20)  constraint PULPIT_PK  primary key not null,
    PULPIT_NAME  varchar(100) null, 
    FACULTY   char(10)   constraint PULPIT_FACULTY_FK foreign key references FACULTY(FACULTY) not null 
);  
insert into PULPIT   (PULPIT,  PULPIT_NAME, FACULTY)
   values  ('ТиП', 'Туризма и природопользования','ЛХ'),              
			('ТЛ', 'Транспорта леса', 'ТТЛП'),                          
			('ТДП','Технологий деревообрабатывающих производств', 'ТТЛП'),   
			('ТиДИД','Технологии и дизайна изделий из древесины','ТТЛП'),    
			('ХПД','Химической переработки древесины','ТОВ'),             
			('ТНВиОХТ','Технологии неорганических веществ и общей химической технологии ','ХТиТ'), 
			('ЭТиМ',    'Экономической теории и маркетинга','ИЭФ'),   
			('СБУАиА', 'Статистики, бухгалтерского учета, анализа и аудита', 'ИЭФ'),     
			('РИТ', 'Редакционно-издательских технологий', 'ИДиП'),
			('ТНХСиППМ', 'Технологии нефтехимического синтеза и переработки полимерных материалов', 'ТОВ'), 
			('ЛВ', 'Лесоводства','ЛХ'),
			('ИСиТ', 'Информационных систем и технологий','ИТ'),
			('ХТЭПиМЭЕ', 'Химии, технологии электрохимических производств и материалов электронной техники', 'ХТиТ');     
             
------Создание и заполнение таблицы TEACHER
 create table TEACHER
 (   TEACHER    char(10)  constraint TEACHER_PK  primary key not null,
     TEACHER_NAME  varchar(100) null, 
     GENDER     char(1) CHECK (GENDER in ('м', 'ж')),
     PULPIT   char(20) constraint TEACHER_PULPIT_FK foreign key references PULPIT(PULPIT) not null
 );
insert into  TEACHER    (TEACHER,   TEACHER_NAME, GENDER, PULPIT )
                       values  ('НСКВ',    'Носков Михаил Трофимович', 'м',  'ТДП'),
							   ('ПРКП',    'Прокопенко Николай Иванович', 'м',  'ТНХСиППМ'),
							   ('МРЗВ',    'Морозова Елена Степановна', 'ж',  'ИСиТ'),
							   ('РЖКВ',    'Рыжиков Леонид Николаевич', 'м',  'ЛВ'),
							   ('РМНВ',    'Романов Дмитрий Михайлович', 'м',  'ИСиТ'),
							   ('СМЛВ',    'Смелов Владимир Владиславович', 'м',  'ИСиТ'),
							   ('КРЛВ',    'Крылов Павел Павлович', 'м',  'ИСиТ'),
							   ('ЧРН',    'Чернова Анна Викторовна', 'ж',  'ХПД');
							   



------Создание и заполнение таблицы SUBJECT
create table SUBJECT
    (     
		SUBJECT  char(10) constraint SUBJECT_PK  primary key not null, 
        SUBJECT_NAME varchar(100) unique null,
        PULPIT  char(20) constraint SUBJECT_PULPIT_FK foreign key references PULPIT(PULPIT) not null   
     )
 insert into SUBJECT   (SUBJECT,   SUBJECT_NAME, PULPIT )
	values ('СУБД',   'Системы управления базами данных', 'ИСиТ'),
			('БД',     'Базы данных','ИСиТ'),
			('ПЭХ',     'Прикладная электрохимия','ХТЭПиМЭЕ'),
			('ИНФ',    'Информационные технологии','ИСиТ'),
			('ОАиП',  'Основы алгоритмизации и программирования', 'ИСиТ'),
			('ПЗ',     'Представление знаний в компьютерных системах', 'ИСиТ'),
			('ПСП',    'Программирование сетевых приложений', 'ИСиТ'),
			('МСОИ',  'Моделирование систем обработки информации', 'ИСиТ'),
			('ПИС',     'Проектирование информационных систем', 'ИСиТ'),
			('КГ',      'Компьютерная геометрия ','ИСиТ'),
			('КМС',     'Компьютерные мультимедийные системы', 'ИСиТ'),
			('ДМ',   'Дискретная математика', 'ИСиТ'),
			('МП',   'Математическое программирование','ИСиТ'), 
			('ЛЭВМ', 'Логические основы ЭВМ',  'ИСиТ'),                   
			('ООП',  'Объектно-ориентированное программирование', 'ИСиТ'),
			('ЭТ', 'Экономическая теория','ЭТиМ'),
			('ТРИ',    'Технология резиновых изделий','ТНХСиППМ'), 
			('ВТЛ',    'Водный транспорт леса','ТЛ'),
			('ТОПИ',   'Технология обогащения полезных ископаемых ','ТНВиОХТ');
			                                                                                                                                                         
  
------Создание и заполнение таблицы GROUPS
CREATE TABLE GROUPS (
    IDGROUP INT CONSTRAINT GROUP_PK PRIMARY KEY NOT NULL,
    FACULTY CHAR(10) CONSTRAINT GROUPS_FACULTY_FK FOREIGN KEY REFERENCES FACULTY(FACULTY) NOT NULL,
    PROFESSION CHAR(20) CONSTRAINT GROUPS_PROFESSION_FK FOREIGN KEY REFERENCES PROFESSION(PROFESSION) NOT NULL,
    YEAR_FIRST SMALLINT CHECK (YEAR_FIRST <= YEAR(GETDATE()) + 2), -- год поступления
    COURSE AS (YEAR(GETDATE()) - YEAR_FIRST + 1)  -- курс, вычисляется при запросе
);

insert into GROUPS   (IDGROUP, FACULTY,  PROFESSION, YEAR_FIRST )
         values (1, 'ИТ','1-40 01 02', 2013), --1
                (2, 'ИТ','1-40 01 02', 2012),
                (3, 'ИТ','1-40 01 02', 2011),
                (4, 'ИТ','1-40 01 02', 2010),
                (5, 'ИДиП','1-47 01 01', 2013),---5 гр
                (6, 'ИДиП','1-47 01 01', 2012),
                (7, 'ИДиП','1-47 01 01', 2011),
                (8, 'ИДиП','1-36 06 01', 2010),-----8 гр
                (9, 'ИДиП','1-36 06 01', 2013),
                (10, 'ИДиП','1-36 06 01', 2012),
                (11, 'ИДиП','1-36 06 01', 2011),
                (14, 'ХТиТ','1-36 07 01', 2011),
                (15, 'ХТиТ','1-36 07 01', 2010),
                (16, 'ТОВ','1-48 01 02', 2012), ---16 гр 
                (17, 'ТОВ','1-48 01 02', 2011),
                (18, 'ТОВ','1-48 01 05', 2013),
                (19, 'ТОВ','1-54 01 03', 2012),
                (20, 'ЛХ','1-75 01 01', 2013),--20 гр      
                (21, 'ЛХ','1-75 02 01', 2012),
                (22, 'ЛХ','1-75 02 01', 2011),
                (23, 'ЛХ','1-89 02 02', 2012),
                (24, 'ЛХ','1-89 02 02', 2011),  
                (27, 'ТТЛП','1-46 01 01', 2012);--27 гр
                       
                          
------Создание и заполнение таблицы STUDENT
create table STUDENT 
(    IDSTUDENT   integer  identity(1000,1) constraint STUDENT_PK  primary key,
      IDGROUP   integer  constraint STUDENT_GROUP_FK foreign key references GROUPS(IDGROUP) not null,        
      NAME   nvarchar(100), 
      BDAY   date,
      STAMP  timestamp,
      INFO     xml default 'NULL',
      FOTO     varbinary(max)
 ) 
insert into STUDENT (IDGROUP,NAME, BDAY)
    values (2, 'Силюк Валерия Ивановна',         '12.07.1994'),
           (2, 'Сергель Виолетта Николаевна',    '06.03.1994'),
           (2, 'Добродей Ольга Анатольевна',     '09.11.1994'),
           (2, 'Подоляк Мария Сергеевна',        '04.10.1994'),
           (2, 'Никитенко Екатерина Дмитриевна', '08.01.1994'),
           (3, 'Яцкевич Галина Иосифовна',       '02.08.1993'),
           (3, 'Осадчая Эла Васильевна',         '07.12.1993'),
           (3, 'Акулова Елена Геннадьевна',      '02.12.1993'),
           (4, 'Плешкун Милана Анатольевна',     '08.03.1992'),
           (4, 'Буянова Мария Александровна',    '02.06.1992'),
           (4, 'Харченко Елена Геннадьевна',     '11.12.1992'),
           (4, 'Крученок Евгений Александрович', '11.05.1992'),
           (4, 'Бороховский Виталий Петрович',   '09.11.1992'),
           (4, 'Мацкевич Надежда Валерьевна',    '01.11.1992'),
           (5, 'Логинова Мария Вячеславовна',    '08.07.1995'),
           (5, 'Белько Наталья Николаевна',      '02.11.1995'),
           (5, 'Селило Екатерина Геннадьевна',   '07.05.1995'),
           (5, 'Дрозд Анастасия Андреевна',      '04.08.1995'),
           (6, 'Козловская Елена Евгеньевна',    '08.11.1994'),
           (6, 'Потапнин Кирилл Олегович',       '02.03.1994'),
           (6, 'Равковская Ольга Николаевна',    '04.06.1994'),
           (6, 'Ходоронок Александра Вадимовна', '09.11.1994'),
           (6, 'Рамук Владислав Юрьевич',        '04.07.1994'),
           (7, 'Неруганенок Мария Владимировна', '03.01.1993'),
           (7, 'Цыганок Анна Петровна',          '12.09.1993'),
           (7, 'Масилевич Оксана Игоревна',      '12.06.1993'),
           (7, 'Алексиевич Елизавета Викторовна','09.02.1993'),
           (7, 'Ватолин Максим Андреевич',       '04.07.1993'),
           (8, 'Синица Валерия Андреевна',       '08.01.1992'),
           (8, 'Кудряшова Алина Николаевна',     '12.05.1992'),
           (8, 'Мигулина Елена Леонидовна',      '08.11.1992'),
           (8, 'Шпиленя Алексей Сергеевич',      '12.03.1992'),
           (9, 'Астафьев Игорь Александрович',   '10.08.1995'),
           (9, 'Гайтюкевич Андрей Игоревич',     '02.05.1995'),
           (9, 'Рученя Наталья Александровна',   '08.01.1995'),
           (9, 'Тарасевич Анастасия Ивановна',   '11.09.1995'),
           (10, 'Жоглин Николай Владимирович',   '08.01.1994'),
           (10, 'Санько Андрей Дмитриевич',      '11.09.1994'),
           (10, 'Пещур Анна Александровна',      '06.04.1994'),
           (10, 'Бучалис Никита Леонидович',     '12.08.1994')
insert into STUDENT (IDGROUP,NAME, BDAY)
    values (11, 'Лавренчук Владислав Николаевич','07.11.1993'),
           (11, 'Власик Евгения Викторовна',     '04.06.1993'),
           (11, 'Абрамов Денис Дмитриевич',      '10.12.1993'),
           (11, 'Оленчик Сергей Николаевич',     '04.07.1993'),
           (11, 'Савинко Павел Андреевич',       '08.01.1993'),
           (11, 'Бакун Алексей Викторович',      '02.09.1993'),
           (14, 'Бань Сергей Анатольевич',       '11.12.1995'),
           (14, 'Сечейко Илья Александрович',    '10.06.1995'),
           (14, 'Кузмичева Анна Андреевна',      '09.08.1995'),
           (14, 'Бурко Диана Францевна',         '04.07.1995'),
           (14, 'Даниленко Максим Васильевич',   '08.03.1995'),
           (14, 'Зизюк Ольга Олеговна',          '12.09.1995'),
           (15, 'Шарапо Мария Владимировна',     '08.10.1994'),
           (15, 'Касперович Вадим Викторович',   '10.02.1994'),
           (15, 'Чупрыгин Арсений Александрович','11.11.1994'),
           (15, 'Воеводская Ольга Леонидовна',   '10.02.1994'),
           (15, 'Метушевский Денис Игоревич',    '12.01.1994'),
           (16, 'Ловецкая Валерия Александровна','11.09.1993'),
           (16, 'Дворак Антонина Николаевна',    '01.12.1993'),
           (16, 'Щука Татьяна Николаевна',       '09.06.1993'),
           (16, 'Коблинец Александра Евгеньевна','05.01.1993'),
           (16, 'Фомичевская Елена Эрнестовна',  '01.07.1993'),
           (17, 'Бесараб Маргарита Вадимовна',   '07.04.1992'),
           (17, 'Бадуро Виктория Сергеевна',     '10.12.1992'),
           (17, 'Тарасенко Ольга Викторовна',    '05.05.1992'),
           (17, 'Афанасенко Ольга Владимировна', '11.01.1992'),
           (17, 'Чуйкевич Ирина Дмитриевна',     '04.06.1992'),
           (18, 'Брель Алеся Алексеевна',        '08.01.1994'),
           (18, 'Кузнецова Анастасия Андреевна', '07.02.1994'),
           (18, 'Томина Карина Геннадьевна',     '12.06.1994'),
           (18, 'Дуброва Павел Игоревич',        '03.07.1994'),
           (18, 'Шпаков Виктор Андреевич',       '04.07.1994'),
           (19, 'Шнейдер Анастасия Дмитриевна',  '08.11.1993'),
           (19, 'Шыгина Елена Викторовна',       '02.04.1993'),
           (19, 'Клюева Анна Ивановна',          '03.06.1993'),
           (19, 'Доморад Марина Андреевна',      '05.11.1993'),
           (19, 'Линчук Михаил Александрович',   '03.07.1993'),
           (20, 'Васильева Дарья Олеговна',      '08.01.1995'),
           (20, 'Щигельская Екатерина Андреевна','06.09.1995'),
           (20, 'Сазонова Екатерина Дмитриевна', '08.03.1995'),
           (20, 'Бакунович Алина Олеговна',      '07.08.1995')

------Создание и заполнение таблицы PROGRESS
create table PROGRESS
 (  SUBJECT   char(10) constraint PROGRESS_SUBJECT_FK foreign key references SUBJECT(SUBJECT),                
     IDSTUDENT integer  constraint PROGRESS_IDSTUDENT_FK foreign key references STUDENT(IDSTUDENT),        
     PDATE    date, 
     NOTE     integer check (NOTE between 1 and 10)
  )
insert into PROGRESS (SUBJECT, IDSTUDENT, PDATE, NOTE)
    values  ('ОАиП', 1001,  '01.10.2013',8),
           ('ОАиП', 1002,  '01.10.2013',7),
		   ('ОАиП', 1000,  '12.01.2014',4),
           ('ОАиП', 1003,  '01.10.2013',5),
           ('ОАиП', 1005,  '01.10.2013',4)
insert into PROGRESS (SUBJECT, IDSTUDENT, PDATE, NOTE)
    values   ('СУБД', 1014,  '01.12.2013',5),
           ('СУБД', 1015,  '01.12.2013',9),
           ('СУБД', 1016,  '01.12.2013',5),
           ('СУБД', 1017,  '01.12.2013',4)
insert into PROGRESS (SUBJECT, IDSTUDENT, PDATE, NOTE)
    values ('КГ',   1018,  '06.5.2013',4),
           ('КГ',   1019,  '06.05.2013',7),
           ('КГ',   1020,  '06.05.2013',7),
           ('КГ',   1021,  '06.05.2013',9),
           ('КГ',   1022,  '06.05.2013',5),
           ('КГ',   1023,  '06.05.2013',6)

